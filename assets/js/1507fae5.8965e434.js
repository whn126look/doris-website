"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([["296554"],{459245:function(e,n,t){t.r(n),t.d(n,{metadata:()=>i,contentTitle:()=>c,default:()=>h,assets:()=>l,toc:()=>a,frontMatter:()=>o});var i=JSON.parse('{"id":"admin-manual/data-admin/ccr/performance","title":"Performance","description":"\x3c!--","source":"@site/docs/admin-manual/data-admin/ccr/performance.md","sourceDirName":"admin-manual/data-admin/ccr","slug":"/admin-manual/data-admin/ccr/performance","permalink":"/docs/dev/admin-manual/data-admin/ccr/performance","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Performance","language":"en_US"},"sidebar":"docs","previous":{"title":"Feature Details","permalink":"/docs/dev/admin-manual/data-admin/ccr/feature"},"next":{"title":"Recover from Recycle Bin","permalink":"/docs/dev/admin-manual/data-admin/recyclebin"}}'),r=t("785893"),s=t("250065");let o={title:"Performance",language:"en_US"},c=void 0,l={},a=[{value:"Test Dataset",id:"test-dataset",level:2},{value:"Test Cluster Configuration",id:"test-cluster-configuration",level:2},{value:"Incremental Synchronization Performance Test",id:"incremental-synchronization-performance-test",level:2},{value:"Test Steps",id:"test-steps",level:3},{value:"Test Conclusion",id:"test-conclusion",level:3},{value:"Full Synchronization Performance Test",id:"full-synchronization-performance-test",level:2},{value:"Test Steps",id:"test-steps-1",level:3},{value:"Test Conclusion",id:"test-conclusion-1",level:3},{value:"Flink Synchronization Performance Test",id:"flink-synchronization-performance-test",level:2},{value:"Test Steps",id:"test-steps-2",level:3},{value:"Test Conclusion",id:"test-conclusion-2",level:3},{value:"Summary",id:"summary",level:2}];function d(e){let n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"The performance data in this document is based on the default configuration. If you are facing high network latency or high throughput write scenarios, you can refer to [the operation manual] (manual.md) for optimization."}),"\n",(0,r.jsx)(n.h2,{id:"test-dataset",children:"Test Dataset"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dataset"}),": TPC-H 1T"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"test-cluster-configuration",children:"Test Cluster Configuration"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Configuration Item"}),(0,r.jsx)(n.th,{children:"Upstream Configuration"}),(0,r.jsx)(n.th,{children:"Downstream Configuration"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"FE"}),(0,r.jsx)(n.td,{children:"2 cores 16 GB"}),(0,r.jsx)(n.td,{children:"2 cores 16 GB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"BE"}),(0,r.jsx)(n.td,{children:"3 nodes, 16 cores 64 GB, 3*500 GB per node"}),(0,r.jsx)(n.td,{children:"3 nodes, 16 cores 64 GB, 3*500 GB per node"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"incremental-synchronization-performance-test",children:"Incremental Synchronization Performance Test"}),"\n",(0,r.jsx)(n.h3,{id:"test-steps",children:"Test Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create the library table information for TPC-H 1T in the upstream cluster."}),"\n",(0,r.jsx)(n.li,{children:"Create a synchronization task for the TPC-H 1T database."}),"\n",(0,r.jsxs)(n.li,{children:["Wait for the TPC-H 1T data import to complete and record the completion time ",(0,r.jsx)(n.code,{children:"a"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time Record"}),": ",(0,r.jsx)(n.code,{children:"2024-12-05 20:09:48"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Wait for the downstream data synchronization to complete and record the completion time ",(0,r.jsx)(n.code,{children:"b"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time Record"}),": ",(0,r.jsx)(n.code,{children:"2024-12-05 20:10:21.678"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Log Information"}),": ",(0,r.jsx)(n.code,{children:"INFO handle upsert binlog, sub sync state: IngestBinlog, prevCommitSeq: 3271, commitSeq: 3282 job=per_ccr line=ccr/job."})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"test-conclusion",children:"Test Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["Incremental synchronization time difference: ",(0,r.jsx)(n.code,{children:"b - a = 33 seconds"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"full-synchronization-performance-test",children:"Full Synchronization Performance Test"}),"\n",(0,r.jsx)(n.h3,{id:"test-steps-1",children:"Test Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create the library table information for TPC-H 1T in the upstream cluster and complete the data import, recording the completion time ",(0,r.jsx)(n.code,{children:"a"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time Record"}),": ",(0,r.jsx)(n.code,{children:"2024-12-05 17:56:56"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Create a synchronization task for the TPC-H 1T database."}),"\n",(0,r.jsxs)(n.li,{children:["Wait for the downstream data synchronization to complete and record the completion time ",(0,r.jsx)(n.code,{children:"b"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time Record"}),": ",(0,r.jsx)(n.code,{children:"2024-12-05 18:02:57"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"test-conclusion-1",children:"Test Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["Full synchronization time difference: ",(0,r.jsx)(n.code,{children:"b - a = 6 minutes 1 second"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"flink-synchronization-performance-test",children:"Flink Synchronization Performance Test"}),"\n",(0,r.jsx)(n.h3,{id:"test-steps-2",children:"Test Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Use Flink to import 100,000,000 records of data in the upstream."}),"\n",(0,r.jsx)(n.li,{children:"Create a synchronization task for the library table."}),"\n",(0,r.jsx)(n.li,{children:"Observe the difference between the downstream synchronization completion time and the upstream import completion time at each stage (e.g., 1,000,000 records, 2,000,000 records, etc.)."}),"\n",(0,r.jsxs)(n.li,{children:["The last import completion time in the upstream is ",(0,r.jsx)(n.code,{children:"2024-12-06 12:53:00"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Log Information"}),": ",(0,r.jsx)(n.code,{children:"2024-12-06 12:53:00,455 INFO org.apache.flink.runtime.executiongraph.ExecutionGraph [] - Source: Custom Source (1/1) (17be78de01ee5175d801c08c1b443771) switched from RUNNING to FINISHED."})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["The downstream synchronization completion time is ",(0,r.jsx)(n.code,{children:"2024-12-06 12:53:01.433"}),".\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Log Information"}),": ",(0,r.jsx)(n.code,{children:"2024-12-06 12:53:01.433 TRACE update job progress done, state: DBIncrementalSync, subState: Done, commitSeq: 12246911, prevCommitSeq: 12246911 job=flink_per_ccr line=ccr/job_progress.go:389"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"test-conclusion-2",children:"Test Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"lag time"})," at each stage is maintained within ",(0,r.jsx)(n.code,{children:"5 seconds"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Incremental Synchronization"}),": Time difference of approximately 33 seconds."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Full Synchronization"}),": Completion time of approximately 6 minutes 1 second."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Flink Synchronization"}),": Each stage's synchronization delay is within 5 seconds."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},250065:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return o}});var i=t(667294);let r={},s=i.createContext(r);function o(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);